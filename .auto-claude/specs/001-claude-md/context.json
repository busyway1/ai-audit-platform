{
  "task_description": "\uc544\ub798 \ud0dc\uc2a4\ud06c \uc911 \uc774 \ud504\ub85c\uc81d\ud2b8\uc5d0 \ud574\ub2f9\ud558\ub294 \ub0b4\uc6a9\ub9cc \uc9c4\ud589\ud558\uc790. Claude.md \ub0b4\uc6a9\ub3c4 \ubc18\ub4dc\uc2dc \uc900\uc218\ud558\uace0. \n\n AI Audit AX Platform - Implementation Plan\n\n Auto Claude \uc2e4\ud589\uc6a9 \uc0c1\uc138 \uad6c\ud604 \uacc4\ud68d\n Generated: 2026-01-08\n Specification: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/.claude/specs/AUDIT-AX-PLATFORM-SPEC.md\n\n ---\n Executive Summary\n\n \ud68c\uacc4\uac10\uc0ac AX \ud50c\ub7ab\ud3fc \uad6c\ud604\uc744 \uc704\ud55c \ub450 \ud504\ub85c\uc81d\ud2b8\uc758 \uc0c1\uc138 \uc791\uc5c5 \ubaa9\ub85d\uc785\ub2c8\ub2e4. \uac01\n task\ub294 auto claude\uac00 \ub3c5\ub9bd\uc801\uc73c\ub85c \uc2e4\ud589\ud560 \uc218 \uc788\ub3c4\ub85d \uc124\uacc4\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\n\n \ud575\uc2ec \uad6c\ud604 \uc601\uc5ed:\n 1. DB \uc2a4\ud0a4\ub9c8 \ud655\uc7a5 (\uc2e0\uaddc 6\uac1c \ud14c\uc774\ube14 + \uae30\uc874 \ud14c\uc774\ube14 \ud655\uc7a5)\n 2. mcp-excel-processor \uc2e0\uaddc MCP \uc11c\ubc84\n 3. \ud504\ub860\ud2b8\uc5d4\ub4dc \ud504\ub85c\uc81d\ud2b8 \uc120\ud0dd/EGA/Task UI\n 4. \ubc31\uc5d4\ub4dc Agent \uace0\ub3c4\ud654 \ubc0f LangGraph \ud1b5\ud569\n\n ---\n PART 1: audit-mcp-suite (MCP \uc11c\ubc84)\n\n Phase 1: Database Schema (P0 - \ucd5c\uc6b0\uc120)\n\n Task MCP-1.1: Create Enhanced Schema Migration\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/database/migrations/011_enhanced_schema.sql\n - Size: M\n - Description: \uc2e0\uaddc \ud14c\uc774\ube14 \ubc0f \uae30\uc874 \ud14c\uc774\ube14 \ud655\uc7a5\n - Tables to create:\n   - audit_egas (EGA \uad00\ub9ac)\n   - workpaper_analysis (\uc870\uc11c \ubd84\uc11d \uacb0\uacfc)\n   - audit_knowledge_base (ISA, PwC Guide, \uc9c8\uc758\ud68c\uc2e0)\n   - urgency_config (HITL \ub2e4\ucc28\uc6d0 \uae30\uc900)\n   - hitl_requests (HITL \uc694\uccad \ud050)\n   - interview_sessions (\uc778\ud130\ubdf0 \uc138\uc158)\n - Alterations:\n   - audit_tasks: ADD parent_task_id, task_level, ega_id, urgency_score,\n assigned_agent\n   - agent_conversations: ADD project_id, ega_id, conversation_summary,\n token_count\n - Acceptance: \ubaa8\ub4e0 \ud14c\uc774\ube14 \uc0dd\uc131, FK \uad00\uacc4 \uac80\uc99d, \ub9c8\uc774\uadf8\ub808\uc774\uc158 idempotent\n\n Task MCP-1.2: Create RLS Policies Extension\n\n - File: /Users/jaewookim/Desktop/Personal Coding/audit-mcp-suite/databas\n e/migrations/012_rls_policies_extension.sql\n - Size: S\n - Description: \uc2e0\uaddc \ud14c\uc774\ube14\uc5d0 \ub300\ud55c RLS \uc815\ucc45 \ucd94\uac00\n - Acceptance: \ud504\ub85c\uc81d\ud2b8 \uae30\ubc18 \uaca9\ub9ac, knowledge_base\ub294 \uc804\uccb4 \uc811\uadfc \ud5c8\uc6a9\n\n ---\n Phase 2: mcp-excel-processor Server (P0)\n\n Task MCP-2.1: Create Server Boilerplate\n\n - Directory: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/servers/mcp-excel-processor/\n - Size: S\n - Files:\n   - __init__.py\n   - main.py (Port 8007)\n   - requirements.txt (openpyxl, pandas, xlsxwriter)\n   - Dockerfile\n   - tools/__init__.py\n - Acceptance: \uc11c\ubc84 8007 \ud3ec\ud2b8 \uc2dc\uc791, health endpoint 200, tools/list \uc751\ub2f5\n\n Task MCP-2.2: Implement Excel Reader Tools\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/servers/mcp-excel-processor/tools/excel_reader.py\n - Size: M\n - Tools:\n   - read_structure(): \uc2dc\ud2b8, \uba85\uba85\ub41c \ubc94\uc704, \uc218\uc2dd \uac1c\uc218 \ubc18\ud658\n   - read_range(): \uc9c0\uc815 \ubc94\uc704 \ub370\uc774\ud130 \ucd94\ucd9c (\uc218\uc2dd \ud3ec\ud568 \uc635\uc158)\n   - analyze_workpaper_structure(): AI\uc6a9 \uc870\uc11c \uad6c\uc870 \ubd84\uc11d (\ud5e4\ub354, \uc22b\uc790\uc5f4\n \uac10\uc9c0)\n - Acceptance: 10MB+ \ud30c\uc77c \ucc98\ub9ac, \uba54\ubaa8\ub9ac \ub204\uc218 \uc5c6\uc74c\n\n Task MCP-2.3: Implement Excel Writer Tools\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/servers/mcp-excel-processor/tools/excel_writer.py\n - Size: M\n - Tools:\n   - write_cell(): \ub2e8\uc77c \uc140 \uc218\uc815 (\ud3ec\ub9f7 \ubcf4\uc874, \ucf54\uba58\ud2b8 \ucd94\uac00)\n   - write_range(): \ubc94\uc704 \ub370\uc774\ud130 \uc4f0\uae30 (audit trail \uc2dc\ud2b8 \uc0dd\uc131)\n   - get_modification_log(): \uc218\uc815 \uc774\ub825 \ubc18\ud658\n - Acceptance: \ud3ec\ub9f7 \ubcf4\uc874, \ucf54\uba58\ud2b8 \ucd94\uac00, audit trail \uc2dc\ud2b8 \uc0dd\uc131\n\n Task MCP-2.4: Register Tools in Main Server\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/servers/mcp-excel-processor/main.py\n - Size: S\n - Description: setup_tools() \uba54\uc11c\ub4dc\uc5d0 5\uac1c \ub3c4\uad6c \ub4f1\ub85d\n - Acceptance: tools/list\uc5d0 5\uac1c \ub3c4\uad6c \uc2a4\ud0a4\ub9c8 \ubc18\ud658, tools/call \ub3d9\uc791\n\n Task MCP-2.5: Add Tests for Excel Processor\n\n - File: /Users/jaewookim/Desktop/Personal Coding/audit-mcp-suite/servers\n /mcp-excel-processor/tests/test_excel_processor.py\n - Size: M\n - Acceptance: \uc77d\uae30/\uc4f0\uae30 \ud14c\uc2a4\ud2b8 \ud1b5\uacfc, \uc5e3\uc9c0 \ucf00\uc774\uc2a4 \ucc98\ub9ac\n\n Task MCP-2.6: Update docker-compose.yml\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/docker-compose.yml\n - Size: S\n - Description: mcp-excel-processor \uc11c\ube44\uc2a4 \ucd94\uac00 (port 8007)\n - Acceptance: docker-compose up\uc73c\ub85c \uc804\uccb4 \uc11c\ube44\uc2a4 \uc2dc\uc791\n\n ---\n Phase 3: RAG Knowledge Base Expansion (P1)\n\n Task MCP-3.1: Create ISA Ingestion Script\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/scripts/ingest_isa.py\n - Size: M\n - Description: ISA(\uac10\uc0ac\uae30\uc900\uc11c) \uc778\uc81c\uc2a4\ud2b8 \uc2a4\ud06c\ub9bd\ud2b8\n - Input: PDF/markdown \ud30c\uc77c\n - Output: audit_knowledge_base \ud14c\uc774\ube14 (source_type='ISA')\n - Acceptance: \uacc4\uce35\uc801 \uccad\ud0b9, \uc784\ubca0\ub529 \uc0dd\uc131, \uba54\ud0c0\ub370\uc774\ud130 \uc800\uc7a5\n\n Task MCP-3.2: Create PwC Guide Ingestion Script\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/scripts/ingest_pwc_guide.py\n - Size: M\n - Description: PwC Audit Guide \uc778\uc81c\uc2a4\ud2b8\n - Acceptance: source_type='PwC_Guide'\ub85c \uc800\uc7a5\n\n Task MCP-3.3: Create \uc9c8\uc758\ud68c\uc2e0 Ingestion Script\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/scripts/ingest_qa_responses.py\n - Size: M\n - Description: \ud68c\uacc4/\uac10\uc0ac \uc9c8\uc758\ud68c\uc2e0 \uc778\uc81c\uc2a4\ud2b8\n - Acceptance: source_type='\uc9c8\uc758\ud68c\uc2e0'\uc73c\ub85c \uc800\uc7a5\n\n Task MCP-3.4: Update mcp-rag for Multi-Source Search\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/servers/mcp-rag/main.py\n - Size: M\n - Description: audit_knowledge_base \ud14c\uc774\ube14 \uc9c0\uc6d0 \ucd94\uac00\n - New tool: search_knowledge_base(query, source_types, top_k)\n - Acceptance: \ub2e4\uc911 \uc18c\uc2a4 \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9 \ub3d9\uc791\n\n ---\n Phase 4: Urgency & Memory Services (P1)\n\n Task MCP-4.1: Create Urgency Calculator Module\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/orchestrator/urgency_calculator.py\n - Size: M\n - Description: \ub2e4\ucc28\uc6d0 urgency score \uacc4\uc0b0\n - Factors: materiality (40%), risk (35%), AI confidence (25%)\n - Methods: calculate(), should_escalate(), calculate_for_task()\n - Acceptance: \uc810\uc218 \uacc4\uc0b0 \uacb0\uc815\uc801, \uac00\uc911\uce58 \uc124\uc815 \uac00\ub2a5\n\n Task MCP-4.2: Create Memory Manager Module\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/orchestrator/memory_manager.py\n - Size: L\n - Description: Agent \ub300\ud654 \uba54\ubaa8\ub9ac \uad00\ub9ac (\uc800\uc7a5, \uc870\ud68c, \uc694\uc57d)\n - Methods:\n   - save_message(): \uba54\uc2dc\uc9c0 \uc800\uc7a5\n   - get_context(): \ud1a0\ud070 \uc81c\ud55c \ub0b4 \ucee8\ud14d\uc2a4\ud2b8 \uc870\ud68c\n   - _check_and_summarize(): 8000 \ud1a0\ud070 \ucd08\uacfc \uc2dc \uc694\uc57d\n - LLM: Claude Haiku for cost-effective summarization\n - Acceptance: \ud1a0\ud070 \uce74\uc6b4\ud305 \uc815\ud655, \uc694\uc57d \ud2b8\ub9ac\uac70 \ub3d9\uc791\n\n ---\n Phase 5: External Integration (P2)\n\n Task MCP-5.1: Setup Desktop Commander Integration\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/orchestrator/desktop_commander_client.py\n - Size: S\n - Description: Desktop Commander MCP \uc678\ubd80 \ud638\ucd9c \ud074\ub77c\uc774\uc5b8\ud2b8\n - URL: https://github.com/wonderwhy-er/DesktopCommanderMCP\n - Acceptance: \uc678\ubd80 MCP \uc11c\ubc84 \ud638\ucd9c, \ud30c\uc77c \uc811\uadfc \ub3d9\uc791\n\n ---\n PART 2: AI Audit Frontend\n\n Phase 6: Project Selection UI (P0)\n\n Task FE-6.1: Create Project Store\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/stores/useProjectStore.ts\n - Size: S\n - Description: Zustand store for project state management\n - Methods: fetchProjects(), selectProject(), createProject(),\n updateProject()\n - Acceptance: Supabase CRUD \ub3d9\uc791, localStorage \uc601\uc18d\uc131\n\n Task FE-6.2: Create Project Selector Component\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/components/layout/ProjectSelector.tsx\n - Size: M\n - Description: \ucc44\ud305 \ud654\uba74 \uc0c1\ub2e8 \ub4dc\ub86d\ub2e4\uc6b4 \ucef4\ud3ec\ub10c\ud2b8\n - Features: \ud504\ub85c\uc81d\ud2b8 \ubaa9\ub85d, \ud604\uc7ac \ud504\ub85c\uc81d\ud2b8 \ud558\uc774\ub77c\uc774\ud2b8, \"New Project\" \ubc84\ud2bc\n - Acceptance: \ub4dc\ub86d\ub2e4\uc6b4 \ub3d9\uc791, \uc120\ud0dd \uc2dc store \uc5c5\ub370\uc774\ud2b8\n\n Task FE-6.3: Create Project Registration Modal\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/components/layout/ProjectRegistrationModal.tsx\n - Size: M\n - Description: \uc2e0\uaddc \ud504\ub85c\uc81d\ud2b8 \uc0dd\uc131 \ubaa8\ub2ec\n - Form fields: client_name, fiscal_year, overall_materiality, status\n - Validation: zod schema\n - Acceptance: \ud3fc \uac80\uc99d, Supabase \uc0dd\uc131, \ubaa8\ub2ec \ub2eb\ud798\n\n Task FE-6.4: Integrate ProjectSelector into AppShell\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/components/layout/AppShell.tsx\n - Size: S\n - Description: \ud5e4\ub354\uc5d0 ProjectSelector \ucd94\uac00\n - Acceptance: \ud5e4\ub354\uc5d0 \ud45c\uc2dc, \ubc18\uc751\ud615 \ub808\uc774\uc544\uc6c3\n\n ---\n Phase 7: EGA and Task Hierarchy (P1)\n\n Task FE-7.1: Create EGA Store\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/stores/useEGAStore.ts\n - Size: S\n - Description: EGA \uc0c1\ud0dc \uad00\ub9ac\n - Acceptance: audit_egas \ud14c\uc774\ube14 CRUD\n\n Task FE-7.2: Create EGA List Component\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/components/ega/EGAList.tsx\n - Size: M\n - Description: EGA \uce74\ub4dc/\ub9ac\uc2a4\ud2b8 \ubdf0\n - Features: risk level \ubc30\uc9c0, \uc9c4\ud589\ub960 \ubc14, task \uac1c\uc218\n - Acceptance: EGA \ubaa9\ub85d \ud45c\uc2dc, \ud544\ud130\ub9c1 \ub3d9\uc791\n\n Task FE-7.3: Create Task Hierarchy Tree Component\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/components/tasks/TaskHierarchyTree.tsx\n - Size: L\n - Description: High -> Mid -> Low \uacc4\uce35 \ud2b8\ub9ac \ubdf0\n - Features: expand/collapse, \uc0c1\ud0dc \ud45c\uc2dc, \ub4dc\ub798\uadf8 \uc564 \ub4dc\ub86d (optional)\n - Acceptance: 3\ub2e8\uacc4 \uacc4\uce35 \ud45c\uc2dc, \uc131\ub2a5 \ucd5c\uc801\ud654\n\n ---\n Phase 8: Real-time Agent Streaming (P0)\n\n Task FE-8.1: Update useStreamingChat for Real SSE\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/hooks/useStreamingChat.ts\n - Size: M\n - Description: \uc2e4\uc81c SSE \uc5f0\uacb0\ub85c \uc5c5\ub370\uc774\ud2b8\n - Endpoint: /api/stream/{task_id}\n - Events: message, heartbeat, error\n - Acceptance: \uc2e4\uc2dc\uac04 \uba54\uc2dc\uc9c0 \uc218\uc2e0, \uc7ac\uc5f0\uacb0 \ub85c\uc9c1\n\n Task FE-8.2: Create Agent Conversation Panel\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/components/agents/AgentConversationPanel.tsx\n - Size: M\n - Description: Partner/Manager/Staff \ub300\ud654 \ud328\ub110\n - Features: \uc5ed\ud560 \uc778\ub514\ucf00\uc774\ud130, \ud0c0\uc784\uc2a4\ud0ec\ud504, \uc2a4\ud06c\ub864 \uace0\uc815\n - Acceptance: \ubaa8\ub4e0 agent \ub300\ud654 \uc2e4\uc2dc\uac04 \ud45c\uc2dc\n\n ---\n Phase 9: HITL Interface (P1)\n\n Task FE-9.1: Create HITL Request Store\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/stores/useHITLStore.ts\n - Size: S\n - Acceptance: hitl_requests \ud14c\uc774\ube14 \uc5f0\ub3d9\n\n Task FE-9.2: Create HITL Request Card Component\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/components/hitl/HITLRequestCard.tsx\n - Size: M\n - Description: HITL \uc694\uccad \uce74\ub4dc\n - Features: urgency \ubc30\uc9c0, \ucee8\ud14d\uc2a4\ud2b8 \ud45c\uc2dc, \uc2b9\uc778/\uac70\ubd80 \ubc84\ud2bc\n - Acceptance: \uce74\ub4dc UI, \uc751\ub2f5 \uc81c\ucd9c\n\n Task FE-9.3: Create HITL Queue View\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/components/hitl/HITLQueue.tsx\n - Size: M\n - Description: HITL \uc694\uccad \ud050 \ubdf0\n - Features: urgency \uc815\ub82c, \ud544\ud130\ub9c1\n - Acceptance: \ub300\uae30 \uc911\uc778 \uc694\uccad \ubaa9\ub85d \ud45c\uc2dc\n\n ---\n PART 3: AI Audit Backend\n\n Phase 10: Partner Agent Enhancement (P0)\n\n Task BE-10.1: Add Deep Research Capability\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/agents/partner_agent.py\n - Size: L\n - Description: RAG + Web \ubcf5\ud569 \uac80\uc0c9 \uae30\ub2a5 \ucd94\uac00\n - Method: deep_research(topic, state)\n - Integration: mcp-rag, mcp-web-research\n - Acceptance: \ub2e4\uc911 \uc18c\uc2a4 \uac80\uc0c9, \uacb0\uacfc \ud569\uc131\n\n Task BE-10.2: Add Interview Workflow\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/graph/nodes/interview_node.py\n - Size: L\n - Description: \uc804\ubc18\uac10\uc0ac\uc804\ub7b5 \uc778\ud130\ubdf0 \ub178\ub4dc\n - Features:\n   - \ud558\uc774\ube0c\ub9ac\ub4dc \uc9c8\ubb38 (\uccb4\ud06c\ub9ac\uc2a4\ud2b8 + \ub3d9\uc801 \uc9c8\ubb38)\n   - \uc2a4\ud399 \ubb38\uc11c \uc0dd\uc131\n   - plan mode \uc9c4\uc785\n - Acceptance: \uc2ec\uce35 \uc9c8\ubb38 \uc0dd\uc131, \uc694\uad6c\uc0ac\ud56d \ucd94\ucd9c\n\n ---\n Phase 11: Manager Agent Enhancement (P0)\n\n Task BE-11.1: Add Dynamic Staff Allocation\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/agents/manager_agent.py\n - Size: L\n - Description: \ub3d9\uc801 Staff \ud560\ub2f9 \uae30\ub2a5\n - Method: allocate_staff_agents(task, available_staff)\n - Factors: risk level, required skills, workload\n - Acceptance: \ubcf5\uc7a1\ub3c4 \uae30\ubc18 \ud560\ub2f9, \ubd80\ud558 \ubd84\uc0b0\n\n ---\n Phase 12: Staff Agent Dynamic Spawning (P1)\n\n Task BE-12.1: Create Staff Agent Factory\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/agents/staff_factory.py\n - Size: M\n - Description: \ud2b9\ud654 Staff agent \uc0dd\uc131 \ud329\ud1a0\ub9ac\n - Types: Excel_Parser, Standard_Retriever, Vouching_Assistant,\n WorkPaper_Generator\n - Acceptance: \ud0c0\uc785\ubcc4 agent \uc0dd\uc131\n\n Task BE-12.2: Implement Staff Agents with MCP Integration\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/agents/staff_agents.py\n - Size: L\n - Description: Staff agent \uc804\uccb4 \uad6c\ud604 (MCP \ub3c4\uad6c \ud1b5\ud569)\n - Acceptance: \ubaa8\ub4e0 MCP \ub3c4\uad6c \ud638\ucd9c \ub3d9\uc791\n\n ---\n Phase 13: EGA Parsing and Task Generation (P0)\n\n Task BE-13.1: Create EGA Parser Node\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/graph/nodes/ega_parser.py\n - Size: M\n - Description: Assigned Workflow \ubb38\uc11c\uc5d0\uc11c EGA \ucd94\ucd9c\n - Method: parse_assigned_workflow(file_path, mcp_excel_client)\n - Output: audit_egas \ub808\ucf54\ub4dc \uc0dd\uc131\n - Acceptance: \ub2e4\uc591\ud55c \ud615\uc2dd \ud30c\uc2f1, \uacc4\uce35 \uad00\uacc4 \ucd94\ucd9c\n\n Task BE-13.2: Create Task Generation Node\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/graph/nodes/task_generator.py\n - Size: L\n - Description: EGA\uc5d0\uc11c 3\ub2e8\uacc4 task \uacc4\uce35 \uc0dd\uc131\n - Levels: High (EGA\ub2f9), Mid (assertion\ub2f9), Low (\uc808\ucc28\ub2f9)\n - Acceptance: \uacc4\uce35 \uad6c\uc870 \uc0dd\uc131, parent_task_id \uc5f0\uacb0\n\n Task BE-13.3: Create Urgency Calculation Node\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/graph/nodes/urgency_node.py\n - Size: S\n - Description: task urgency score \uacc4\uc0b0 \ub178\ub4dc\n - Integration: urgency_calculator \ubaa8\ub4c8 \ud638\ucd9c\n - Acceptance: \ubaa8\ub4e0 task\uc5d0 urgency_score \ud560\ub2f9\n\n ---\n Phase 14: LangGraph Integration (P0)\n\n Task BE-14.1: Update Main Graph with New Nodes\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/graph/graph.py\n - Size: L\n - Description: \uc2e0\uaddc \ub178\ub4dc \ud1b5\ud569\n - Nodes to add:\n   - interview_node\n   - ega_parser_node\n   - task_generator_node\n   - urgency_node\n - Edges: conditional routing \uc5c5\ub370\uc774\ud2b8\n - Acceptance: \uc804\uccb4 \uc6cc\ud06c\ud50c\ub85c\uc6b0 \ub3d9\uc791, \uccb4\ud06c\ud3ec\uc778\ud305\n\n Task BE-14.2: Update State Definition\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/graph/state.py\n - Size: S\n - Description: AuditState\uc5d0 \uc2e0\uaddc \ud544\ub4dc \ucd94\uac00\n - Fields: interview_complete, specification, egas, urgency_config\n - Acceptance: \ud0c0\uc785 \uc548\uc804\uc131\n\n Task BE-14.3: Add HITL Interrupt Nodes\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/graph/nodes/hitl_interrupt.py\n - Size: M\n - Description: HITL \uc778\ud130\ub7fd\ud2b8 \ub178\ub4dc\n - Trigger: urgency_score >= threshold\n - Acceptance: \uc778\ud130\ub7fd\ud2b8 \ub3d9\uc791, \uc751\ub2f5 \ud6c4 \uc7ac\uac1c\n\n ---\n Phase 15: API Endpoints (P1)\n\n Task BE-15.1: Add Project Endpoints\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/api/routes.py\n - Size: M\n - Endpoints:\n   - POST /api/projects - \ud504\ub85c\uc81d\ud2b8 \uc0dd\uc131\n   - GET /api/projects - \ud504\ub85c\uc81d\ud2b8 \ubaa9\ub85d\n   - GET /api/projects/{id} - \ud504\ub85c\uc81d\ud2b8 \uc0c1\uc138\n - Acceptance: REST API \ub3d9\uc791\n\n Task BE-15.2: Add EGA Endpoints\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/api/routes.py\n - Size: M\n - Endpoints:\n   - POST /api/projects/{id}/egas/parse - Assigned Workflow \ud30c\uc2f1\n   - GET /api/projects/{id}/egas - EGA \ubaa9\ub85d\n - Acceptance: \ud30c\uc2f1 \ubc0f \uc870\ud68c \ub3d9\uc791\n\n Task BE-15.3: Add HITL Endpoints\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/api/routes.py\n - Size: S\n - Endpoints:\n   - GET /api/hitl/pending - \ub300\uae30 \uc911\uc778 HITL \uc694\uccad\n   - POST /api/hitl/{id}/respond - HITL \uc751\ub2f5\n - Acceptance: HITL \ud050 \uad00\ub9ac\n\n ---\n Execution Strategy\n\n Parallel Execution Model (User Approved)\n\n \ub450 \ud504\ub85c\uc81d\ud2b8 \ub3d9\uc2dc \ubcd1\ub82c \uc2e4\ud589 - Auto Claude\uac00 \uac01 \ud504\ub85c\uc81d\ud2b8\ub97c \ubcc4\ub3c4 \uc778\uc2a4\ud134\uc2a4\ub85c\n  \uc2e4\ud589\n\n \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n \u2502              Auto Claude Instance 1                             \u2502\n \u2502              (audit-mcp-suite)                                  \u2502\n \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502\n \u2502  \u2502  Worktree 1: MCP-1.1 (DB Schema)                           \u2502\u2502\n \u2502  \u2502  Worktree 2: MCP-2.1~2.6 (Excel Processor)                 \u2502\u2502\n \u2502  \u2502  Worktree 3: MCP-3.1~3.4 (RAG Expansion)                   \u2502\u2502\n \u2502  \u2502  Worktree 4: MCP-4.1~4.2 (Urgency/Memory)                  \u2502\u2502\n \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502\n \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n \u2502              Auto Claude Instance 2                             \u2502\n \u2502              (AI Audit)                                         \u2502\n \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502\n \u2502  \u2502  Worktree 1: FE-6.1~6.4 (Project UI)                       \u2502\u2502\n \u2502  \u2502  Worktree 2: FE-7.1~7.3 (EGA/Task UI)                      \u2502\u2502\n \u2502  \u2502  Worktree 3: FE-8.1~8.2 (Streaming)                        \u2502\u2502\n \u2502  \u2502  Worktree 4: BE-10.1~10.2 (Partner Agent)                  \u2502\u2502\n \u2502  \u2502  Worktree 5: BE-13.1~13.3 (EGA/Task)                       \u2502\u2502\n \u2502  \u2502  Worktree 6: BE-14.1~14.3 (LangGraph)                      \u2502\u2502\n \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502\n \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n Dependency Graph (Critical Path)\n\n MCP-1.1 (DB Schema) \u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n            \u2502             \u2502                                       \u2502\n            \u25bc             \u25bc                                       \u25bc\n       MCP-1.2      MCP-2.1~2.6                             FE-6.1~6.4\n       (RLS)        (Excel)                                (Project UI)\n            \u2502             \u2502                                       \u2502\n            \u25bc             \u25bc                                       \u25bc\n       MCP-3.1~3.4   MCP-4.1~4.2                           FE-7.1~7.3\n       (RAG)        (Urgency/Memory)                       (EGA/Task)\n                                                                 \u2502\n                                                                 \u25bc\n                                                           BE-13.1~13.3\n                                                           (Parser/Gen)\n                                                                 \u2502\n                                                                 \u25bc\n                                                           BE-14.1~14.3\n                                                           (LangGraph)\n\n Task Groupings for Parallel Worktrees\n\n audit-mcp-suite (4 worktrees):\n 1. worktree/db-schema: MCP-1.1, MCP-1.2\n 2. worktree/excel-processor: MCP-2.1, MCP-2.2, MCP-2.3, MCP-2.4,\n MCP-2.5, MCP-2.6\n 3. worktree/rag-expansion: MCP-3.1, MCP-3.2, MCP-3.3, MCP-3.4\n 4. worktree/services: MCP-4.1, MCP-4.2, MCP-5.1\n\n AI Audit (6 worktrees):\n 1. worktree/project-ui: FE-6.1, FE-6.2, FE-6.3, FE-6.4\n 2. worktree/ega-task-ui: FE-7.1, FE-7.2, FE-7.3\n 3. worktree/streaming: FE-8.1, FE-8.2\n 4. worktree/hitl-ui: FE-9.1, FE-9.2, FE-9.3\n 5. worktree/agents: BE-10.1, BE-10.2, BE-11.1, BE-12.1, BE-12.2\n 6. worktree/graph-nodes: BE-13.1, BE-13.2, BE-13.3, BE-14.1, BE-14.2,\n BE-14.3, BE-15.1, BE-15.2, BE-15.3\n\n ---\n Verification Plan\n\n 1. Database Schema\n\n cd /Users/jaewookim/Desktop/Personal Coding/audit-mcp-suite\n psql $DATABASE_URL -f database/migrations/011_enhanced_schema.sql\n psql $DATABASE_URL -c \"\\dt audit_*\"  # Verify tables created\n\n 2. mcp-excel-processor\n\n cd /Users/jaewookim/Desktop/Personal\n Coding/audit-mcp-suite/servers/mcp-excel-processor\n python -m pytest tests/\n curl http://localhost:8007/health\n curl http://localhost:8007/tools/list\n\n 3. Frontend Components\n\n cd /Users/jaewookim/Desktop/Personal Coding/AI\\ Audit/frontend\n npm run dev\n # Manual testing: Project selector dropdown, EGA list, Task tree\n\n 4. Backend LangGraph\n\n cd /Users/jaewookim/Desktop/Personal Coding/AI\\ Audit/backend\n python -m pytest tests/\n # Start server and test workflow endpoints\n\n 5. End-to-End\n\n 1. Create new project via UI\n 2. Upload Assigned Workflow document\n 3. Verify EGAs and Tasks generated\n 4. Start audit workflow\n 5. Verify Agent conversations streaming\n 6. Test HITL interrupt and response\n\n ---\n Critical Files Reference\n File: audit-mcp-suite/database/migrations/011_enhanced_schema.sql\n Purpose: Core schema\n \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n File: audit-mcp-suite/servers/mcp-excel-processor/main.py\n Purpose: Excel automation\n \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n File: AI Audit/frontend/src/app/stores/useProjectStore.ts\n Purpose: Project state\n \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n File: AI Audit/backend/src/graph/nodes/ega_parser.py\n Purpose: EGA extraction\n \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n File: AI Audit/backend/src/graph/graph.py\n Purpose: Main workflow\n \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n File: AI Audit/backend/src/agents/partner_agent.py\n Purpose: Deep research\n ---\n Notes for Auto Claude\n\n CLAUDE.md \uc900\uc218 (CRITICAL)\n\n \uac01 \ud504\ub85c\uc81d\ud2b8\uc758 CLAUDE.md \uc9c0\uce68\uc744 \ubc18\ub4dc\uc2dc \uc900\uc218\ud560 \uac83:\n\n - audit-mcp-suite: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/CLAUDE.md\n - AI Audit: /Users/jaewookim/Desktop/Personal Coding/AI Audit/CLAUDE.md\n\n \ud575\uc2ec \uc900\uc218\uc0ac\ud56d:\n 1. Worktree\ub97c \uc0ac\uc6a9\ud55c \uaca9\ub9ac\ub41c \uac1c\ubc1c\n 2. PostToolUse \uac80\uc99d \ud65c\uc131\ud654\n 3. \ud30c\uc77c \ud06c\uae30 \uc81c\ud55c (800\uc904/\ud30c\uc77c, 50\uc904/\ud568\uc218)\n 4. \ucf54\ub4dc \ud488\uc9c8 \uac80\uc0ac (/validate-architecture)\n 5. \uc644\ub8cc \ud6c4 \ud53c\ub4dc\ubc31 (/feedback-capture)\n\n TDD \uc2a4\ud0c0\uc77c (User Approved)\n\n \ubaa8\ub4e0 task\uc5d0 \ud14c\uc2a4\ud2b8 \ud3ec\ud568 - \uad6c\ud604\uacfc \ud568\uaed8 \uc791\uc131\n\n Task \uc2e4\ud589 \uc21c\uc11c:\n 1. \ud14c\uc2a4\ud2b8 \ud30c\uc77c \uc0dd\uc131 (Red)\n 2. \ucd5c\uc18c \uad6c\ud604 (Green)\n 3. \ub9ac\ud329\ud1a0\ub9c1 (Refactor)\n 4. Acceptance Criteria \uac80\uc99d\n\n \ud14c\uc2a4\ud2b8 \ud30c\uc77c \uc704\uce58:\n - MCP \uc11c\ubc84: servers/<server>/tests/test_*.py\n - Frontend: src/**/*.test.ts \ub610\ub294 src/**/*.test.tsx\n - Backend: tests/test_*.py\n\n Execution Rules\n\n 1. Dependencies: Worktree \uadf8\ub8f9 \ub0b4 task\ub294 \uc21c\uc11c\ub300\ub85c \uc2e4\ud589\n 2. Parallel: \uc11c\ub85c \ub2e4\ub978 Worktree \uadf8\ub8f9\uc740 \ubcd1\ub82c \uc2e4\ud589 \uac00\ub2a5\n 3. DB Migration: MCP-1.1\uc740 \ubaa8\ub4e0 task\uc758 \uc120\ud589 \uc870\uac74 (\uba3c\uc800 \uc644\ub8cc \ud544\uc694)\n 4. Port Conflicts: mcp-excel-processor\ub294 8007, \uae30\uc874 \uc11c\ubc84\uc640 \ucda9\ub3cc \uc5c6\uc74c\n \ud655\uc778\n 5. Environment: .env \ud30c\uc77c\uc5d0 \ud544\uc694\ud55c \ud658\uacbd\ubcc0\uc218 \ud655\uc778 (SUPABASE_URL,\n OPENAI_API_KEY \ub4f1)\n 6. Commit: \uac01 task \uc644\ub8cc \ud6c4 /commit-push-pr \uc2e4\ud589\n\n Task Completion Checklist\n\n \uac01 task \uc644\ub8cc \uc2dc \ud655\uc778:\n - TDD: \ud14c\uc2a4\ud2b8 \uc791\uc131 \ubc0f \ud1b5\uacfc\n - Acceptance Criteria \ubaa8\ub450 \ucda9\uc871\n - /validate-architecture \ud1b5\uacfc\n - CLAUDE.md \ucf54\ub4dc \ud488\uc9c8 \uae30\uc900 \ucda9\uc871\n - Git commit with proper message\n - /feedback-capture \uc2e4\ud589",
  "scoped_services": [],
  "files_to_modify": [],
  "files_to_reference": [],
  "created_at": "2026-01-08T16:24:35.317628"
}