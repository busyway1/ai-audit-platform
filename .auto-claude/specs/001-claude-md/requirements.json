{
  "task_description": "아래 태스크 중 이 프로젝트에 해당하는 내용만 진행하자. Claude.md 내용도 반드시 준수하고. \n\n AI Audit AX Platform - Implementation Plan\n\n Auto Claude 실행용 상세 구현 계획\n Generated: 2026-01-08\n Specification: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/.claude/specs/AUDIT-AX-PLATFORM-SPEC.md\n\n ---\n Executive Summary\n\n 회계감사 AX 플랫폼 구현을 위한 두 프로젝트의 상세 작업 목록입니다. 각\n task는 auto claude가 독립적으로 실행할 수 있도록 설계되었습니다.\n\n 핵심 구현 영역:\n 1. DB 스키마 확장 (신규 6개 테이블 + 기존 테이블 확장)\n 2. mcp-excel-processor 신규 MCP 서버\n 3. 프론트엔드 프로젝트 선택/EGA/Task UI\n 4. 백엔드 Agent 고도화 및 LangGraph 통합\n\n ---\n PART 1: audit-mcp-suite (MCP 서버)\n\n Phase 1: Database Schema (P0 - 최우선)\n\n Task MCP-1.1: Create Enhanced Schema Migration\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/database/migrations/011_enhanced_schema.sql\n - Size: M\n - Description: 신규 테이블 및 기존 테이블 확장\n - Tables to create:\n   - audit_egas (EGA 관리)\n   - workpaper_analysis (조서 분석 결과)\n   - audit_knowledge_base (ISA, PwC Guide, 질의회신)\n   - urgency_config (HITL 다차원 기준)\n   - hitl_requests (HITL 요청 큐)\n   - interview_sessions (인터뷰 세션)\n - Alterations:\n   - audit_tasks: ADD parent_task_id, task_level, ega_id, urgency_score,\n assigned_agent\n   - agent_conversations: ADD project_id, ega_id, conversation_summary,\n token_count\n - Acceptance: 모든 테이블 생성, FK 관계 검증, 마이그레이션 idempotent\n\n Task MCP-1.2: Create RLS Policies Extension\n\n - File: /Users/jaewookim/Desktop/Personal Coding/audit-mcp-suite/databas\n e/migrations/012_rls_policies_extension.sql\n - Size: S\n - Description: 신규 테이블에 대한 RLS 정책 추가\n - Acceptance: 프로젝트 기반 격리, knowledge_base는 전체 접근 허용\n\n ---\n Phase 2: mcp-excel-processor Server (P0)\n\n Task MCP-2.1: Create Server Boilerplate\n\n - Directory: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/servers/mcp-excel-processor/\n - Size: S\n - Files:\n   - __init__.py\n   - main.py (Port 8007)\n   - requirements.txt (openpyxl, pandas, xlsxwriter)\n   - Dockerfile\n   - tools/__init__.py\n - Acceptance: 서버 8007 포트 시작, health endpoint 200, tools/list 응답\n\n Task MCP-2.2: Implement Excel Reader Tools\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/servers/mcp-excel-processor/tools/excel_reader.py\n - Size: M\n - Tools:\n   - read_structure(): 시트, 명명된 범위, 수식 개수 반환\n   - read_range(): 지정 범위 데이터 추출 (수식 포함 옵션)\n   - analyze_workpaper_structure(): AI용 조서 구조 분석 (헤더, 숫자열\n 감지)\n - Acceptance: 10MB+ 파일 처리, 메모리 누수 없음\n\n Task MCP-2.3: Implement Excel Writer Tools\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/servers/mcp-excel-processor/tools/excel_writer.py\n - Size: M\n - Tools:\n   - write_cell(): 단일 셀 수정 (포맷 보존, 코멘트 추가)\n   - write_range(): 범위 데이터 쓰기 (audit trail 시트 생성)\n   - get_modification_log(): 수정 이력 반환\n - Acceptance: 포맷 보존, 코멘트 추가, audit trail 시트 생성\n\n Task MCP-2.4: Register Tools in Main Server\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/servers/mcp-excel-processor/main.py\n - Size: S\n - Description: setup_tools() 메서드에 5개 도구 등록\n - Acceptance: tools/list에 5개 도구 스키마 반환, tools/call 동작\n\n Task MCP-2.5: Add Tests for Excel Processor\n\n - File: /Users/jaewookim/Desktop/Personal Coding/audit-mcp-suite/servers\n /mcp-excel-processor/tests/test_excel_processor.py\n - Size: M\n - Acceptance: 읽기/쓰기 테스트 통과, 엣지 케이스 처리\n\n Task MCP-2.6: Update docker-compose.yml\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/docker-compose.yml\n - Size: S\n - Description: mcp-excel-processor 서비스 추가 (port 8007)\n - Acceptance: docker-compose up으로 전체 서비스 시작\n\n ---\n Phase 3: RAG Knowledge Base Expansion (P1)\n\n Task MCP-3.1: Create ISA Ingestion Script\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/scripts/ingest_isa.py\n - Size: M\n - Description: ISA(감사기준서) 인제스트 스크립트\n - Input: PDF/markdown 파일\n - Output: audit_knowledge_base 테이블 (source_type='ISA')\n - Acceptance: 계층적 청킹, 임베딩 생성, 메타데이터 저장\n\n Task MCP-3.2: Create PwC Guide Ingestion Script\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/scripts/ingest_pwc_guide.py\n - Size: M\n - Description: PwC Audit Guide 인제스트\n - Acceptance: source_type='PwC_Guide'로 저장\n\n Task MCP-3.3: Create 질의회신 Ingestion Script\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/scripts/ingest_qa_responses.py\n - Size: M\n - Description: 회계/감사 질의회신 인제스트\n - Acceptance: source_type='질의회신'으로 저장\n\n Task MCP-3.4: Update mcp-rag for Multi-Source Search\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/servers/mcp-rag/main.py\n - Size: M\n - Description: audit_knowledge_base 테이블 지원 추가\n - New tool: search_knowledge_base(query, source_types, top_k)\n - Acceptance: 다중 소스 하이브리드 검색 동작\n\n ---\n Phase 4: Urgency & Memory Services (P1)\n\n Task MCP-4.1: Create Urgency Calculator Module\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/orchestrator/urgency_calculator.py\n - Size: M\n - Description: 다차원 urgency score 계산\n - Factors: materiality (40%), risk (35%), AI confidence (25%)\n - Methods: calculate(), should_escalate(), calculate_for_task()\n - Acceptance: 점수 계산 결정적, 가중치 설정 가능\n\n Task MCP-4.2: Create Memory Manager Module\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/orchestrator/memory_manager.py\n - Size: L\n - Description: Agent 대화 메모리 관리 (저장, 조회, 요약)\n - Methods:\n   - save_message(): 메시지 저장\n   - get_context(): 토큰 제한 내 컨텍스트 조회\n   - _check_and_summarize(): 8000 토큰 초과 시 요약\n - LLM: Claude Haiku for cost-effective summarization\n - Acceptance: 토큰 카운팅 정확, 요약 트리거 동작\n\n ---\n Phase 5: External Integration (P2)\n\n Task MCP-5.1: Setup Desktop Commander Integration\n\n - File: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/orchestrator/desktop_commander_client.py\n - Size: S\n - Description: Desktop Commander MCP 외부 호출 클라이언트\n - URL: https://github.com/wonderwhy-er/DesktopCommanderMCP\n - Acceptance: 외부 MCP 서버 호출, 파일 접근 동작\n\n ---\n PART 2: AI Audit Frontend\n\n Phase 6: Project Selection UI (P0)\n\n Task FE-6.1: Create Project Store\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/stores/useProjectStore.ts\n - Size: S\n - Description: Zustand store for project state management\n - Methods: fetchProjects(), selectProject(), createProject(),\n updateProject()\n - Acceptance: Supabase CRUD 동작, localStorage 영속성\n\n Task FE-6.2: Create Project Selector Component\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/components/layout/ProjectSelector.tsx\n - Size: M\n - Description: 채팅 화면 상단 드롭다운 컴포넌트\n - Features: 프로젝트 목록, 현재 프로젝트 하이라이트, \"New Project\" 버튼\n - Acceptance: 드롭다운 동작, 선택 시 store 업데이트\n\n Task FE-6.3: Create Project Registration Modal\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/components/layout/ProjectRegistrationModal.tsx\n - Size: M\n - Description: 신규 프로젝트 생성 모달\n - Form fields: client_name, fiscal_year, overall_materiality, status\n - Validation: zod schema\n - Acceptance: 폼 검증, Supabase 생성, 모달 닫힘\n\n Task FE-6.4: Integrate ProjectSelector into AppShell\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/components/layout/AppShell.tsx\n - Size: S\n - Description: 헤더에 ProjectSelector 추가\n - Acceptance: 헤더에 표시, 반응형 레이아웃\n\n ---\n Phase 7: EGA and Task Hierarchy (P1)\n\n Task FE-7.1: Create EGA Store\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/stores/useEGAStore.ts\n - Size: S\n - Description: EGA 상태 관리\n - Acceptance: audit_egas 테이블 CRUD\n\n Task FE-7.2: Create EGA List Component\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/components/ega/EGAList.tsx\n - Size: M\n - Description: EGA 카드/리스트 뷰\n - Features: risk level 배지, 진행률 바, task 개수\n - Acceptance: EGA 목록 표시, 필터링 동작\n\n Task FE-7.3: Create Task Hierarchy Tree Component\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/components/tasks/TaskHierarchyTree.tsx\n - Size: L\n - Description: High -> Mid -> Low 계층 트리 뷰\n - Features: expand/collapse, 상태 표시, 드래그 앤 드롭 (optional)\n - Acceptance: 3단계 계층 표시, 성능 최적화\n\n ---\n Phase 8: Real-time Agent Streaming (P0)\n\n Task FE-8.1: Update useStreamingChat for Real SSE\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/hooks/useStreamingChat.ts\n - Size: M\n - Description: 실제 SSE 연결로 업데이트\n - Endpoint: /api/stream/{task_id}\n - Events: message, heartbeat, error\n - Acceptance: 실시간 메시지 수신, 재연결 로직\n\n Task FE-8.2: Create Agent Conversation Panel\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/components/agents/AgentConversationPanel.tsx\n - Size: M\n - Description: Partner/Manager/Staff 대화 패널\n - Features: 역할 인디케이터, 타임스탬프, 스크롤 고정\n - Acceptance: 모든 agent 대화 실시간 표시\n\n ---\n Phase 9: HITL Interface (P1)\n\n Task FE-9.1: Create HITL Request Store\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/stores/useHITLStore.ts\n - Size: S\n - Acceptance: hitl_requests 테이블 연동\n\n Task FE-9.2: Create HITL Request Card Component\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/components/hitl/HITLRequestCard.tsx\n - Size: M\n - Description: HITL 요청 카드\n - Features: urgency 배지, 컨텍스트 표시, 승인/거부 버튼\n - Acceptance: 카드 UI, 응답 제출\n\n Task FE-9.3: Create HITL Queue View\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/frontend/src/app/components/hitl/HITLQueue.tsx\n - Size: M\n - Description: HITL 요청 큐 뷰\n - Features: urgency 정렬, 필터링\n - Acceptance: 대기 중인 요청 목록 표시\n\n ---\n PART 3: AI Audit Backend\n\n Phase 10: Partner Agent Enhancement (P0)\n\n Task BE-10.1: Add Deep Research Capability\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/agents/partner_agent.py\n - Size: L\n - Description: RAG + Web 복합 검색 기능 추가\n - Method: deep_research(topic, state)\n - Integration: mcp-rag, mcp-web-research\n - Acceptance: 다중 소스 검색, 결과 합성\n\n Task BE-10.2: Add Interview Workflow\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/graph/nodes/interview_node.py\n - Size: L\n - Description: 전반감사전략 인터뷰 노드\n - Features:\n   - 하이브리드 질문 (체크리스트 + 동적 질문)\n   - 스펙 문서 생성\n   - plan mode 진입\n - Acceptance: 심층 질문 생성, 요구사항 추출\n\n ---\n Phase 11: Manager Agent Enhancement (P0)\n\n Task BE-11.1: Add Dynamic Staff Allocation\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/agents/manager_agent.py\n - Size: L\n - Description: 동적 Staff 할당 기능\n - Method: allocate_staff_agents(task, available_staff)\n - Factors: risk level, required skills, workload\n - Acceptance: 복잡도 기반 할당, 부하 분산\n\n ---\n Phase 12: Staff Agent Dynamic Spawning (P1)\n\n Task BE-12.1: Create Staff Agent Factory\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/agents/staff_factory.py\n - Size: M\n - Description: 특화 Staff agent 생성 팩토리\n - Types: Excel_Parser, Standard_Retriever, Vouching_Assistant,\n WorkPaper_Generator\n - Acceptance: 타입별 agent 생성\n\n Task BE-12.2: Implement Staff Agents with MCP Integration\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/agents/staff_agents.py\n - Size: L\n - Description: Staff agent 전체 구현 (MCP 도구 통합)\n - Acceptance: 모든 MCP 도구 호출 동작\n\n ---\n Phase 13: EGA Parsing and Task Generation (P0)\n\n Task BE-13.1: Create EGA Parser Node\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/graph/nodes/ega_parser.py\n - Size: M\n - Description: Assigned Workflow 문서에서 EGA 추출\n - Method: parse_assigned_workflow(file_path, mcp_excel_client)\n - Output: audit_egas 레코드 생성\n - Acceptance: 다양한 형식 파싱, 계층 관계 추출\n\n Task BE-13.2: Create Task Generation Node\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/graph/nodes/task_generator.py\n - Size: L\n - Description: EGA에서 3단계 task 계층 생성\n - Levels: High (EGA당), Mid (assertion당), Low (절차당)\n - Acceptance: 계층 구조 생성, parent_task_id 연결\n\n Task BE-13.3: Create Urgency Calculation Node\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/graph/nodes/urgency_node.py\n - Size: S\n - Description: task urgency score 계산 노드\n - Integration: urgency_calculator 모듈 호출\n - Acceptance: 모든 task에 urgency_score 할당\n\n ---\n Phase 14: LangGraph Integration (P0)\n\n Task BE-14.1: Update Main Graph with New Nodes\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/graph/graph.py\n - Size: L\n - Description: 신규 노드 통합\n - Nodes to add:\n   - interview_node\n   - ega_parser_node\n   - task_generator_node\n   - urgency_node\n - Edges: conditional routing 업데이트\n - Acceptance: 전체 워크플로우 동작, 체크포인팅\n\n Task BE-14.2: Update State Definition\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/graph/state.py\n - Size: S\n - Description: AuditState에 신규 필드 추가\n - Fields: interview_complete, specification, egas, urgency_config\n - Acceptance: 타입 안전성\n\n Task BE-14.3: Add HITL Interrupt Nodes\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/graph/nodes/hitl_interrupt.py\n - Size: M\n - Description: HITL 인터럽트 노드\n - Trigger: urgency_score >= threshold\n - Acceptance: 인터럽트 동작, 응답 후 재개\n\n ---\n Phase 15: API Endpoints (P1)\n\n Task BE-15.1: Add Project Endpoints\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/api/routes.py\n - Size: M\n - Endpoints:\n   - POST /api/projects - 프로젝트 생성\n   - GET /api/projects - 프로젝트 목록\n   - GET /api/projects/{id} - 프로젝트 상세\n - Acceptance: REST API 동작\n\n Task BE-15.2: Add EGA Endpoints\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/api/routes.py\n - Size: M\n - Endpoints:\n   - POST /api/projects/{id}/egas/parse - Assigned Workflow 파싱\n   - GET /api/projects/{id}/egas - EGA 목록\n - Acceptance: 파싱 및 조회 동작\n\n Task BE-15.3: Add HITL Endpoints\n\n - File: /Users/jaewookim/Desktop/Personal Coding/AI \n Audit/backend/src/api/routes.py\n - Size: S\n - Endpoints:\n   - GET /api/hitl/pending - 대기 중인 HITL 요청\n   - POST /api/hitl/{id}/respond - HITL 응답\n - Acceptance: HITL 큐 관리\n\n ---\n Execution Strategy\n\n Parallel Execution Model (User Approved)\n\n 두 프로젝트 동시 병렬 실행 - Auto Claude가 각 프로젝트를 별도 인스턴스로\n  실행\n\n ┌─────────────────────────────────────────────────────────────────┐\n │              Auto Claude Instance 1                             │\n │              (audit-mcp-suite)                                  │\n │  ┌─────────────────────────────────────────────────────────────┐│\n │  │  Worktree 1: MCP-1.1 (DB Schema)                           ││\n │  │  Worktree 2: MCP-2.1~2.6 (Excel Processor)                 ││\n │  │  Worktree 3: MCP-3.1~3.4 (RAG Expansion)                   ││\n │  │  Worktree 4: MCP-4.1~4.2 (Urgency/Memory)                  ││\n │  └─────────────────────────────────────────────────────────────┘│\n └─────────────────────────────────────────────────────────────────┘\n\n ┌─────────────────────────────────────────────────────────────────┐\n │              Auto Claude Instance 2                             │\n │              (AI Audit)                                         │\n │  ┌─────────────────────────────────────────────────────────────┐│\n │  │  Worktree 1: FE-6.1~6.4 (Project UI)                       ││\n │  │  Worktree 2: FE-7.1~7.3 (EGA/Task UI)                      ││\n │  │  Worktree 3: FE-8.1~8.2 (Streaming)                        ││\n │  │  Worktree 4: BE-10.1~10.2 (Partner Agent)                  ││\n │  │  Worktree 5: BE-13.1~13.3 (EGA/Task)                       ││\n │  │  Worktree 6: BE-14.1~14.3 (LangGraph)                      ││\n │  └─────────────────────────────────────────────────────────────┘│\n └─────────────────────────────────────────────────────────────────┘\n\n Dependency Graph (Critical Path)\n\n MCP-1.1 (DB Schema) ─────┬───────────────────────────────────────┐\n            │             │                                       │\n            ▼             ▼                                       ▼\n       MCP-1.2      MCP-2.1~2.6                             FE-6.1~6.4\n       (RLS)        (Excel)                                (Project UI)\n            │             │                                       │\n            ▼             ▼                                       ▼\n       MCP-3.1~3.4   MCP-4.1~4.2                           FE-7.1~7.3\n       (RAG)        (Urgency/Memory)                       (EGA/Task)\n                                                                 │\n                                                                 ▼\n                                                           BE-13.1~13.3\n                                                           (Parser/Gen)\n                                                                 │\n                                                                 ▼\n                                                           BE-14.1~14.3\n                                                           (LangGraph)\n\n Task Groupings for Parallel Worktrees\n\n audit-mcp-suite (4 worktrees):\n 1. worktree/db-schema: MCP-1.1, MCP-1.2\n 2. worktree/excel-processor: MCP-2.1, MCP-2.2, MCP-2.3, MCP-2.4,\n MCP-2.5, MCP-2.6\n 3. worktree/rag-expansion: MCP-3.1, MCP-3.2, MCP-3.3, MCP-3.4\n 4. worktree/services: MCP-4.1, MCP-4.2, MCP-5.1\n\n AI Audit (6 worktrees):\n 1. worktree/project-ui: FE-6.1, FE-6.2, FE-6.3, FE-6.4\n 2. worktree/ega-task-ui: FE-7.1, FE-7.2, FE-7.3\n 3. worktree/streaming: FE-8.1, FE-8.2\n 4. worktree/hitl-ui: FE-9.1, FE-9.2, FE-9.3\n 5. worktree/agents: BE-10.1, BE-10.2, BE-11.1, BE-12.1, BE-12.2\n 6. worktree/graph-nodes: BE-13.1, BE-13.2, BE-13.3, BE-14.1, BE-14.2,\n BE-14.3, BE-15.1, BE-15.2, BE-15.3\n\n ---\n Verification Plan\n\n 1. Database Schema\n\n cd /Users/jaewookim/Desktop/Personal Coding/audit-mcp-suite\n psql $DATABASE_URL -f database/migrations/011_enhanced_schema.sql\n psql $DATABASE_URL -c \"\\dt audit_*\"  # Verify tables created\n\n 2. mcp-excel-processor\n\n cd /Users/jaewookim/Desktop/Personal\n Coding/audit-mcp-suite/servers/mcp-excel-processor\n python -m pytest tests/\n curl http://localhost:8007/health\n curl http://localhost:8007/tools/list\n\n 3. Frontend Components\n\n cd /Users/jaewookim/Desktop/Personal Coding/AI\\ Audit/frontend\n npm run dev\n # Manual testing: Project selector dropdown, EGA list, Task tree\n\n 4. Backend LangGraph\n\n cd /Users/jaewookim/Desktop/Personal Coding/AI\\ Audit/backend\n python -m pytest tests/\n # Start server and test workflow endpoints\n\n 5. End-to-End\n\n 1. Create new project via UI\n 2. Upload Assigned Workflow document\n 3. Verify EGAs and Tasks generated\n 4. Start audit workflow\n 5. Verify Agent conversations streaming\n 6. Test HITL interrupt and response\n\n ---\n Critical Files Reference\n File: audit-mcp-suite/database/migrations/011_enhanced_schema.sql\n Purpose: Core schema\n ────────────────────────────────────────\n File: audit-mcp-suite/servers/mcp-excel-processor/main.py\n Purpose: Excel automation\n ────────────────────────────────────────\n File: AI Audit/frontend/src/app/stores/useProjectStore.ts\n Purpose: Project state\n ────────────────────────────────────────\n File: AI Audit/backend/src/graph/nodes/ega_parser.py\n Purpose: EGA extraction\n ────────────────────────────────────────\n File: AI Audit/backend/src/graph/graph.py\n Purpose: Main workflow\n ────────────────────────────────────────\n File: AI Audit/backend/src/agents/partner_agent.py\n Purpose: Deep research\n ---\n Notes for Auto Claude\n\n CLAUDE.md 준수 (CRITICAL)\n\n 각 프로젝트의 CLAUDE.md 지침을 반드시 준수할 것:\n\n - audit-mcp-suite: /Users/jaewookim/Desktop/Personal \n Coding/audit-mcp-suite/CLAUDE.md\n - AI Audit: /Users/jaewookim/Desktop/Personal Coding/AI Audit/CLAUDE.md\n\n 핵심 준수사항:\n 1. Worktree를 사용한 격리된 개발\n 2. PostToolUse 검증 활성화\n 3. 파일 크기 제한 (800줄/파일, 50줄/함수)\n 4. 코드 품질 검사 (/validate-architecture)\n 5. 완료 후 피드백 (/feedback-capture)\n\n TDD 스타일 (User Approved)\n\n 모든 task에 테스트 포함 - 구현과 함께 작성\n\n Task 실행 순서:\n 1. 테스트 파일 생성 (Red)\n 2. 최소 구현 (Green)\n 3. 리팩토링 (Refactor)\n 4. Acceptance Criteria 검증\n\n 테스트 파일 위치:\n - MCP 서버: servers/<server>/tests/test_*.py\n - Frontend: src/**/*.test.ts 또는 src/**/*.test.tsx\n - Backend: tests/test_*.py\n\n Execution Rules\n\n 1. Dependencies: Worktree 그룹 내 task는 순서대로 실행\n 2. Parallel: 서로 다른 Worktree 그룹은 병렬 실행 가능\n 3. DB Migration: MCP-1.1은 모든 task의 선행 조건 (먼저 완료 필요)\n 4. Port Conflicts: mcp-excel-processor는 8007, 기존 서버와 충돌 없음\n 확인\n 5. Environment: .env 파일에 필요한 환경변수 확인 (SUPABASE_URL,\n OPENAI_API_KEY 등)\n 6. Commit: 각 task 완료 후 /commit-push-pr 실행\n\n Task Completion Checklist\n\n 각 task 완료 시 확인:\n - TDD: 테스트 작성 및 통과\n - Acceptance Criteria 모두 충족\n - /validate-architecture 통과\n - CLAUDE.md 코드 품질 기준 충족\n - Git commit with proper message\n - /feedback-capture 실행",
  "workflow_type": "feature"
}